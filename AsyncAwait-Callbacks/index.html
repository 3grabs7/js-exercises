<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../Template/style.css" />
    <link rel="stylesheet" href="./style.css" />
    <title>Async/Await + Callbacks</title>
  </head>

  <body>
    <div class="nav">
      <div>
        <h3>JavaScript Exercises</h3>
        <h1>Async/Await + Callbacks</h1>
      </div>
      <div>
        <label for="facitToggle">Facit</label>
        <button
          class="button facit-toggle"
          onclick="toggleFacit()"
          id="facitToggle"
        ></button>
      </div>
    </div>
    <div class="warning" data-action>
      OBS
      <a href="https://github.com/3grabs7/js-exercises-api" target="_blank"
        >js-exercise-api</a
      >
      ASP.NET webbservern måste vara igång och redo att anslutas till.
      <button class="button">Dismiss</button>
    </div>
    <div class="main-container">
      <!-- EXERCISE 1 -->
      <!-- id selectors follows the pattern 'ex-*[type]*' -->
      <div class="ex-container">
        <div class="ex-header">
          <h2>Exercise 1</h2>
        </div>
        <div class="ex-desc">
          <p>
            Titta på swagger dokumentationen och kalla på den lokala webbapin
            för att hämta ut en bild utan throttle.
          </p>
          <p>
            Sätt source på bilden till höger till bildlänken, och använd
            metadata för att sätta bildstorleken fast hälften så stor.
          </p>
          <p>Skriv ut bildens storlek under bilden.</p>
          <div class="ex-desc-links">
            <h3>Hjälplänkar</h3>
            <a target="_blank" href="https://javascript.info/fetch">Fetch</a>
          </div>
        </div>
        <div class="ex-main">
          <div id="ex-1">
            <h4>Bild</h4>
            <img src="img/wrong-sign.jpg" alt="" />
            <p>beskrivning</p>
          </div>
        </div>
      </div>

      <!-- EXERCISE 2 -->
      <div class="ex-container">
        <div class="ex-header">
          <h2>Exercise 2</h2>
        </div>
        <div class="ex-desc">
          <p>
            Webbapin har lite brister. Man kan hämta en bild via
            <code>api/image/{id}</code>
            men det finns inget sätt att se hur många bilder som finns
            tillgängliga.
          </p>
          <p>
            Men om man skickar in ett id som inte finns så får man ett 404 svar
            tillbaka. Använd detta för att skapa en while-loop som fortsätter
            att hämta bilder tills den stöter på en 404.
          </p>
          <p>Gör alla bilder till 100x100</p>
        </div>
        <div class="ex-main">
          <div id="ex-2" class="d-flex fd-col"></div>
        </div>
      </div>

      <!-- EXERCISE 3 -->
      <div class="ex-container">
        <div class="ex-header">
          <h2>Exercise 3</h2>
        </div>
        <div class="ex-desc">
          <p>
            Prompta användaren om en URL till en ny bild att ladda upp när
            användaren trycker på knappen.
          </p>
          <p>
            Sen gör ett HTTP POST anrop till api/image för att ladda upp den
            till bild tjänsten.
          </p>
          <p>
            Om allt gick bra så ska du ha fått tillbaka bilden + metadata som du
            kan visa upp precis som i exercise 1.
          </p>
          <div class="ex-desc-links">
            <h3>Hjälplänkar</h3>
            <a
              target="_blank"
              href="https://javascript.info/fetch#post-requests"
              >HTTP POST with fetch</a
            >
          </div>
        </div>
        <div class="ex-main">
          <div id="ex-3">
            <h4>Bild</h4>
            <img src="img/wrong-sign.jpg" alt="" />
            <p>beskrivning</p>
            <button>Ladda upp bild</button>
          </div>
        </div>
      </div>

      <!-- EXERCISE 4 -->
      <div class="ex-container">
        <div class="ex-header">
          <h2>Exercise 4</h2>
        </div>
        <div class="ex-desc">
          <p>
            Använd en for-loop för att hämta tre bilder på raken via await:s.
          </p>
          <p>
            Använd <code>api/image/{id}/throttle</code> sökvägen istället för
            den vanliga. Detta lägger till en slumpad delay på 2-10 sek per
            anrop.
          </p>
          <p>
            Mät den totala tiden det tar att göra alla anrop via
            <code>Date.now()</code> och skriv ut i fönstret.
          </p>
          <div class="ex-desc-links">
            <h3>Hjälplänkar</h3>
            <a target="_blank" href="https://javascript.info/date#date-now"
              >Date.now()</a
            >
          </div>
        </div>
        <div class="ex-main">
          <div id="ex-4" class="d-flex fd-col">
            <p>Det tog ... ms för bilderna att ladda ner.</p>
          </div>
        </div>
      </div>

      <!-- EXERCISE 5 -->
      <div class="ex-container">
        <div class="ex-header">
          <h2>Exercise 5</h2>
        </div>
        <div class="ex-desc">
          <p>
            Samma som excercise 4 fast denna gången så hämtar du alla bilder
            parallellt via <code>await Promise.all</code> som kombinerar ihop
            flera löften till ett stort löfte som vi sen kan vänta på.
          </p>
          <p>
            Använd fortfarande <code>api/image/{id}/throttle</code> sökvägen
            istället för den vanliga.
          </p>
          <p>
            Mät den totala tiden det tar att göra alla anrop via
            <code>Date.now()</code> och skriv ut i fönstret som tidigare.
          </p>
          <div class="ex-desc-links">
            <h3>Hjälplänkar</h3>
            <a target="_blank" href="https://javascript.info/promise-api"
              >Promsie API</a
            >
          </div>
        </div>
        <div class="ex-main">
          <div id="ex-5" class="d-flex fd-col">
            <p>Det tog ... ms för bilderna att ladda ner.</p>
          </div>
        </div>
      </div>

      <!-- Fler idéer
      Björn:
        sökapi där man söker i en ordlista. Skicka in text och få tillbaka en lista på allt som matchar
      Robin:
        validering
        frys input
        felaktigt tecken växer -> täcker skärmen -> exploderar
        text visas -> felaktigt tecken-->
    </div>
  </body>

  <script src="../Template/util.js"></script>
  <script src="../Template/toggleFacit.js"></script>
</html>
